<div class="container">
  <h2>Formulare und Datenbindung</h2>
  
  <!-- Template-Driven Form mit Two-Way Binding -->
  <section>
    <h3>1. Template-Driven Form mit Two-Way Binding</h3>
    <div class="form-group">
      <label for="name">Name:</label>
      <input 
        type="text" 
        id="name" 
        [(ngModel)]="benutzerName" 
        #nameInput
        placeholder="Ihr Name">
    </div>
    <p>Eingegebener Name: {{ benutzerName }}</p>
    <p>Input-Länge: {{ nameInput.value.length }}</p>
  </section>
  
  <!-- Reactive Form -->
  <section>
    <h3>2. Reactive Form mit Validierung</h3>
    <form [formGroup]="registrierungForm" (ngSubmit)="onSubmit()">
      
      <div class="form-group">
        <label for="email">E-Mail:</label>
        <input 
          type="email" 
          id="email" 
          formControlName="email"
          [class.error]="email?.invalid && email?.touched">
        @if (email?.invalid && email?.touched) {
          <div class="error-message">
            @if (email?.errors?.['required']) {
              E-Mail ist erforderlich
            }
            @if (email?.errors?.['email']) {
              Ungültige E-Mail-Adresse
            }
          </div>
        }
      </div>
      
      <div class="form-group">
        <label for="passwort">Passwort:</label>
        <input 
          type="password" 
          id="passwort" 
          formControlName="passwort"
          [class.error]="passwort?.invalid && passwort?.touched">
        @if (passwort?.invalid && passwort?.touched) {
          <div class="error-message">
            @if (passwort?.errors?.['required']) {
              Passwort ist erforderlich
            }
            @if (passwort?.errors?.['minlength']) {
              Passwort muss mindestens 8 Zeichen lang sein
            }
          </div>
        }
      </div>
      
      <div class="form-group">
        <label for="alter">Alter:</label>
        <input 
          type="number" 
          id="alter" 
          formControlName="alter"
          [class.error]="alter?.invalid && alter?.touched">
        @if (alter?.invalid && alter?.touched) {
          <div class="error-message">
            @if (alter?.errors?.['required']) {
              Alter ist erforderlich
            }
            @if (alter?.errors?.['min']) {
              Mindestalter ist 18
            }
            @if (alter?.errors?.['max']) {
              Maximalalter ist 120
            }
          </div>
        }
      </div>
      
      <div class="form-group">
        <label for="land">Land:</label>
        <select id="land" formControlName="land">
          <option value="">Bitte wählen</option>
          <option value="DE">Deutschland</option>
          <option value="AT">Österreich</option>
          <option value="CH">Schweiz</option>
        </select>
      </div>
      
      <div class="form-group">
        <label>
          <input type="checkbox" formControlName="agbAkzeptiert">
          AGB akzeptieren
        </label>
        @if (agbAkzeptiert?.invalid && agbAkzeptiert?.touched) {
          <div class="error-message">
            Sie müssen die AGB akzeptieren
          </div>
        }
      </div>
      
      <button 
        type="submit" 
        [disabled]="registrierungForm.invalid">
        Registrieren
      </button>
      
      <button 
        type="button" 
        (click)="resetForm()">
        Zurücksetzen
      </button>
    </form>
    
    <div class="form-status">
      <p>Form Status: {{ registrierungForm.status }}</p>
      <p>Form Valid: {{ registrierungForm.valid }}</p>
      <p>Form Dirty: {{ registrierungForm.dirty }}</p>
      <p>Form Touched: {{ registrierungForm.touched }}</p>
    </div>
  </section>
  
  <!-- Template Reference Variables -->
  <section>
    <h3>3. Template Reference Variables</h3>
    <input 
      #suchfeld 
      type="text" 
      placeholder="Suchbegriff eingeben"
      (keyup.enter)="suchen(suchfeld.value)">
    <button (click)="suchen(suchfeld.value)">Suchen</button>
    <p>Suchbegriff: {{ suchbegriff }}</p>
  </section>
  
  @if (formSubmitted) {
    <div class="success-message">
      <h3>Registrierung erfolgreich!</h3>
      <pre>{{ submittedData | json }}</pre>
    </div>
  }
</div>
